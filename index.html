<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decor Laser & Sweets</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#000;color:#fff;font-family:Arial;min-height:100vh;background:linear-gradient(135deg,#111,#000);}
.top-bar{position:fixed;top:0;left:0;right:0;height:65px;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.9);backdrop-filter:blur(12px);z-index:999;border-bottom:2px solid #d4af37;}
.lang-btn{background:#d4af37;color:#000;padding:10px 22px;border-radius:50px;font-weight:bold;font-size:1rem;cursor:pointer;}
.wa-btn{position:fixed;top:12px;left:15px;width:52px;height:52px;background:#25D366;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;z-index:1000;}
.admin-icon{position:fixed;top:15px;right:15px;font-size:30px;opacity:0.3;cursor:pointer;z-index:1000;}
.back-btn{position:fixed;top:80px;left:15px;background:#d4af37;color:#000;padding:10px 18px;border-radius:50px;font-weight:bold;z-index:998;display:none;}
header{text-align:center;padding:90px 20px 30px;background:linear-gradient(rgba(0,0,0,0.8),rgba(0,0,0,0.8)),url('');background-size:cover;background-position:center;}
h1{font-size:2.4rem;color:#d4af37;margin:15px 0;}
p{font-size:1.2rem;max-width:90%;margin:15px auto;}
.folders{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;padding:20px;}
.folder{cursor:pointer;width:140px;height:140px;background:rgba(212,175,55,0.15);border:2px solid #d4af37;border-radius:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:0.4s;box-shadow:0 6px 20px rgba(212,175,55,0.3);}
.folder:hover{transform:translateY(-10px);background:rgba(212,175,55,0.25);}
.folder i{font-size:50px;color:#d4af37;margin-bottom:10px;}
.folder span{font-weight:bold;font-size:1.1rem;}
.content{display:none;padding:20px 15px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;}
.grid .item{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 8px 20px rgba(212,175,55,0.3);}
.grid img{width:100%;height:220px;object-fit:cover;cursor:pointer;transition:0.3s;}
.grid img:hover{transform:scale(1.05);}
.cap{background:rgba(212,175,55,0.95);color:#000;padding:10px;font-weight:bold;text-align:center;}
.del{position:absolute;top:8px;left:8px;background:#e74c3c;color:#fff;width:38px;height:38px;border-radius:50%;display:none;align-items:center;justify-content:center;font-size:22px;cursor:pointer;}
.vid-grid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;}
.vid-grid iframe{width:100%;height:220px;border-radius:15px;}
#lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);display:none;align-items:center;justify-content:center;z-index:9999;}
#lightbox.active{display:flex;}
#lightbox img{max-width:95%;max-height:95vh;object-fit:contain;border-radius:15px;box-shadow:0 0 40px rgba(212,175,55,0.6);}
#adminpanel{background:#111;border:3px solid #d4af37;padding:25px;border-radius:20px;margin:20px 15px;display:none;z-index:998;}
#adminpanel input,#adminpanel button{width:100%;padding:14px;margin:12px 0;border-radius:12px;}
#adminpanel input{background:#333;color:#fff;border:none;}
#adminpanel button{background:#d4af37;color:#000;font-weight:bold;}
</style>
</head>
<body>

<div class="top-bar">
  <div class="lang-btn" id="langBtn">Español</div>
</div>
<a href="https://wa.me/" class="wa-btn"><i class="fab fa-whatsapp"></i></a>
<div class="admin-icon" id="adminIcon">⚙️</div>
<div class="back-btn">Volver</div>

<header>
  <h1 id="title">¡Bienvenidos al mundo del láser y dulces!</h1>
  <p id="desc">Nuevos diseños cada día para eventos y celebraciones</p>
</header>

<div id="home">
  <div class="folders">
    <div class="folder" onclick="showPage('photos')">
      <i class="fas fa-images"></i>
      <span id="photosText">Fotos</span>
    </div>
    <div class="folder" onclick="showPage('videos')">
      <i class="fas fa-video"></i>
      <span id="videosText">Videos</span>
    </div>
  </div>
</div>

<div class="content" id="photos">
  <h2 id="photosTitle" style="color:#d4af37;text-align:center;margin:20px;">Todas las fotos</h2>
  <div class="grid" id="photoContainer"></div>
</div>

<div class="content" id="videos">
  <h2 id="videosTitle" style="color:#d4af37;text-align:center;margin:20px;">Todos los videos</h2>
  <div class="vid-grid" id="videoContainer"></div>
</div>

<div id="lightbox" onclick="closeLightbox()">
  <img id="bigImg" src="" alt="">
</div>

<div id="adminpanel">
  <h3 style="color:#d4af37;text-align:center;">Añadir foto</h3>
  <input type="file" id="newimg" accept="image/*"><br>
  <input type="text" id="capimg" placeholder="Comentario (opcional)"><br>
  <button onclick="addImg()">Añadir foto</button>

  <h3 style="color:#d4af37;text-align:center;margin-top:20px;">Añadir video de YouTube</h3>
  <input type="text" id="newvid" placeholder="Enlace completo de YouTube"><br>
  <input type="text" id="capvid" placeholder="Comentario (opcional)"><br>
  <button onclick="addVid()">Añadir video</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>

<script>
// ===== Firebase Configuration =====
const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "TU_PROJECT.firebaseapp.com",
  projectId: "TU_PROJECT",
  storageBucket: "TU_PROJECT.appspot.com",
  messagingSenderId: "XXX",
  appId: "XXX",
  databaseURL: "https://TU_PROJECT.firebaseio.com"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const storage = firebase.storage();

// ===== Idiomas =====
let currentLang = 'es';
const texts = {
  es: {title:"¡Bienvenidos al mundo del láser y dulces!",desc:"Nuevos diseños cada día para eventos y celebraciones",photos:"Fotos",videos:"Videos",photosTitle:"Todas las fotos",videosTitle:"Todos los videos",langBtn:"Español",back:"Volver"},
  fr: {title:"Bienvenue dans le monde de la déco laser & douceurs",desc:"Nouveaux designs chaque jour pour fêtes et événements",photos:"Photos",videos:"Vidéos",photosTitle:"Toutes les photos",videosTitle:"Tous les vidéos",langBtn:"Français",back:"Retour"},
  en: {title:"Welcome to the world of laser decor & sweets",desc:"New designs every day for parties and events",photos:"Photos",videos:"Videos",photosTitle:"All Photos",videosTitle:"All Videos",langBtn:"English",back:"Back"},
  ar: {title:"مرحبا في عالم الدكور بالليزر والحلويات",desc:"كل يوم تصاميم جديدة للحفلات والمناسبات",photos:"الصور",videos:"الفيديوهات",photosTitle:"كل الصور",videosTitle:"كل الفيديوهات",langBtn:"عربي",back:"رجوع"}
};
document.getElementById('langBtn').onclick = ()=>{
  const order=['es','fr','en','ar'];
  let i=order.indexOf(currentLang);
  currentLang=order[(i+1)%order.length];
  applyLang();
};
function applyLang(){
  document.getElementById('title').textContent=texts[currentLang].title;
  document.getElementById('desc').textContent=texts[currentLang].desc;
  document.getElementById('photosText').textContent=texts[currentLang].photos;
  document.getElementById('videosText').textContent=texts[currentLang].videos;
  document.getElementById('photosTitle').textContent=texts[currentLang].photosTitle;
  document.getElementById('videosTitle').textContent=texts[currentLang].videosTitle;
  document.getElementById('langBtn').textContent=texts[currentLang].langBtn;
  document.querySelector('.back-btn').textContent=texts[currentLang].back;
  document.documentElement.dir=(currentLang==='ar')?'rtl':'ltr';
  document.documentElement.lang=currentLang;
}
applyLang();

// ===== Navegación =====
let currentView='home';
function showPage(page){
  document.getElementById('home').style.display='none';
  document.getElementById('photos').style.display=page==='photos'?'block':'none';
  document.getElementById('videos').style.display=page==='videos'?'block':'none';
  document.querySelector('.back-btn').style.display='block';
  currentView=page;
  if(page==='photos') loadPhotos();
  if(page==='videos') loadVideos();
  history.pushState({view:page},'');
}
function goBack(){
  document.getElementById('home').style.display='block';
  document.getElementById('photos').style.display='none';
  document.getElementById('videos').style.display='none';
  document.querySelector('.back-btn').style.display='none';
  closeLightbox();
  currentView='home';
}
window.addEventListener('popstate',()=>{
  if(currentView==='lightbox') closeLightbox();
  else if(currentView==='photos'||currentView==='videos') goBack();
});
function openLightbox(src){
  document.getElementById('bigImg').src=src;
  document.getElementById('lightbox').classList.add('active');
  currentView='lightbox';
  history.pushState({view:'lightbox'},'');
}
function closeLightbox(){
  document.getElementById('lightbox').classList.remove('active');
  document.getElementById('bigImg').src='';
  currentView=document.getElementById('photos').style.display==='block'?'photos':'videos';
}

// ===== Admin =====
let pressTimer;
document.getElementById('adminIcon').addEventListener('touchstart',e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('mousedown',e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('touchend',()=>clearTimeout(pressTimer));
document.getElementById('adminIcon').addEventListener('mouseup',()=>clearTimeout(pressTimer));
function openAdmin(){
  if(prompt("Código secreto:")==="1234"){
    document.getElementById('adminpanel').style.display="block";
    alert("Admin activo ♥");
  }
}

// ===== Fotos y Videos desde Firebase =====
function loadPhotos(){
  const container=document.getElementById('photoContainer');
  container.innerHTML='';
  db.ref('images').once('value').then(snapshot=>{
    snapshot.forEach(snap=>{
      const x=snap.val();
      const div=document.createElement('div');
      div.className='item';
      div.innerHTML=`<img src="${x.url}" onclick="openLightbox('${x.url}')"><div class="cap">${x.cap||''}</div>`;
      container.appendChild(div);
    });
  });
}
function loadVideos(){
  const container=document.getElementById('videoContainer');
  container.innerHTML='';
  db.ref('videos').once('value').then(snapshot=>{
    snapshot.forEach(snap=>{
      const x=snap.val();
      const embed=x.url.includes('youtu.be')?'https://www.youtube.com/embed/'+x.url.split('/').pop():x.url.replace('watch?v=','embed/');
      const div=document.createElement('div');
      div.className='item';
      div.innerHTML=`<iframe src="${embed}" allowfullscreen></iframe><div class="cap">${x.cap||''}</div>`;
      container.appendChild(div);
    });
  });
}

// ===== Añadir Fotos/Videos Admin =====
function addImg(){
  const f=document.getElementById('newimg').files[0];
  if(!f)return alert("Selecciona una imagen");
  const reader=new FileReader();
  reader.onload=e=>{
    const name='img_'+Date.now();
    storage.ref('images/'+name).put(f).then(snap=>{
      snap.ref.getDownloadURL().then(url=>{
        const cap=document.getElementById('capimg').value;
        db.ref('images').push({url,cap});
        loadPhotos();
      });
    });
  };
  reader.readAsDataURL(f);
}
function addVid(){
  const l=document.getElementById('newvid').value.trim();
  if(!l.includes('yout')) return alert("Solo enlaces de YouTube");
  const cap=document.getElementById('capvid').value;
  db.ref('videos').push({url:l,cap});
  loadVideos();
}

// ===== Inicializar =====
loadPhotos(); loadVideos();

</script>
</body>
</html>
