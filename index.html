<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¯ÙƒÙˆØ± Ù„ÙŠØ²Ø± ÙˆØ­Ù„ÙˆÙŠØ§Øª</title>
<style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{background:#000;color:#fff;font-family:Arial;min-height:100vh;background:linear-gradient(135deg,#111,#000);}
    .top-bar{position:fixed;top:0;left:0;right:0;height:65px;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.9);backdrop-filter:blur(12px);z-index:999;border-bottom:2px solid #d4af37;}
    .lang-btn{background:#d4af37;color:#000;padding:10px 25px;border-radius:50px;font-weight:bold;font-size:1.1rem;cursor:pointer;}
    .wa-btn{position:fixed;top:12px;left:15px;width:52px;height:52px;background:#25D366;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:30px;z-index:1000;}
    .admin-icon{position:fixed;top:15px;right:15px;font-size:30px;opacity:0.3;cursor:pointer;z-index:1000;}
    .back-btn{position:fixed;top:80px;left:15px;background:#d4af37;color:#000;padding:10px 18px;border-radius:50px;font-weight:bold;z-index:998;display:none;}

    header{text-align:center;padding:90px 20px 30px;background:linear-gradient(rgba(0,0,0,0.8),rgba(0,0,0,0.8)),url('https://images.unsplash.com/photo-1518770660439-24edd4c565f7');background-size:cover;background-position:center;}
    h1{font-size:2.4rem;color:#d4af37;margin:15px 0;}
    p{font-size:1.2rem;max-width:90%;margin:15px auto;}

    .folders{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;padding:20px;}
    .folder{cursor:pointer;width:140px;height:140px;background:rgba(212,175,55,0.15);border:2px solid #d4af37;border-radius:18px;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:0.4s;box-shadow:0 6px 20px rgba(212,175,55,0.3);}
    .folder:hover{transform:translateY(-10px);background:rgba(212,175,55,0.25);}
    .folder i{font-size:50px;color:#d4af37;margin-bottom:10px;}
    .folder span{font-weight:bold;font-size:1.1rem;}

    .content{display:none;padding:20px 15px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;}
    .grid .item{position:relative;border-radius:15px;overflow:hidden;box-shadow:0 8px 20px rgba(212,175,55,0.3);}
    .grid img{width:100%;height:220px;object-fit:cover;cursor:pointer;transition:0.3s;}
    .grid img:hover{transform:scale(1.05);}
    .cap{background:rgba(212,175,55,0.95);color:#000;padding:10px;font-weight:bold;text-align:center;}
    .del{position:absolute;top:8px;left:8px;background:#e74c3c;color:#fff;width:38px;height:38px;border-radius:50%;display:none;align-items:center;justify-content:center;font-size:22px;cursor:pointer;}
    .vid-grid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;}
    .vid-grid iframe{width:100%;height:220px;border-radius:15px;}

    #lightbox{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.98);display:none;align-items:center;justify-content:center;z-index:9999;}
    #lightbox.active{display:flex;}
    #lightbox img{max-width:95%;max-height:95vh;object-fit:contain;border-radius:15px;box-shadow:0 0 40px rgba(212,175,55,0.6);}

    #adminpanel{background:#111;border:3px solid #d4af37;padding:25px;border-radius:20px;margin:20px 15px;display:none;z-index:998;}
    #adminpanel input,#adminpanel button{width:100%;padding:14px;margin:12px 0;border-radius:12px;}
    #adminpanel input{background:#333;color:#fff;border:none;}
    #adminpanel button{background:#d4af37;color:#000;font-weight:bold;}
    .loading{text-align:center;color:#d4af37;margin:20px;font-size:1.3rem;}
    #uploadFrame{display:none;}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="top-bar"><div class="lang-btn" onclick="toggleLang()">Ø¹Ø±Ø¨ÙŠ / EspaÃ±ol</div></div>
<a href="https://wa.me/34644170829" class="wa-btn"><i class="fab fa-whatsapp"></i></a>
<div class="admin-icon" id="adminIcon">âš™ï¸</div>
<div class="back-btn" onclick="goBack()">Ø±Ø¬ÙˆØ¹</div>

<header>
    <h1>Ù…Ø±Ø­Ø¨Ø§ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¯ÙƒÙˆØ± Ø¨Ø§Ù„Ù„ÙŠØ²Ø± ÙˆØ§Ù„Ø­Ù„ÙˆÙŠØ§Øª</h1>
    <p>ÙƒÙ„ ÙŠÙˆÙ… ØªØµØ§Ù…ÙŠÙ… Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø­ÙÙ„Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª</p>
</header>

<div id="home">
    <div class="folders">
        <div class="folder" onclick="showPage('photos')"><i class="fas fa-images"></i><span>Ø§Ù„ØµÙˆØ±</span></div>
        <div class="folder" onclick="showPage('videos')"><i class="fas fa-video"></i><span>Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</span></div>
    </div>
</div>

<div class="content" id="photos">
    <h2 style="color:#d4af37;text-align:center;margin:20px;">ÙƒÙ„ Ø§Ù„ØµÙˆØ±</h2>
    <div class="grid" id="photoContainer"></div>
</div>

<div class="content" id="videos">
    <h2 style="color:#d4af37;text-align:center;margin:20px;">ÙƒÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª</h2>
    <div class="vid-grid" id="videoContainer"></div>
</div>

<div id="lightbox" onclick="closeLightbox()">
    <img id="bigImg" src="" alt="">
</div>

<div id="adminpanel">
    <h3 style="color:#d4af37;text-align:center;">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© (ØªØ±ÙØ¹ Ø¹Ù„Ù‰ Imgur ØªÙ„Ù‚Ø§Ø¦ÙŠ)</h3>
    <input type="file" id="newimg" accept="image/*"><br>
    <input type="text" id="capimg" placeholder="ØªØ¹Ù„ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"><br>
    <button onclick="startImgurUpload()">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</button>
    <div class="loading" id="uploadStatus"></div>
    <iframe id="uploadFrame" src=""></iframe>

    <h3 style="color:#d4af37;text-align:center;margin-top:20px;">Ø¥Ø¶Ø§ÙØ© ÙÙŠØ¯ÙŠÙˆ ÙŠÙˆØªÙŠÙˆØ¨</h3>
    <input type="text" id="newvid" placeholder="Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ ÙƒØ§Ù…Ù„"><br>
    <input type="text" id="capvid" placeholder="ØªØ¹Ù„ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"><br>
    <button onclick="addVid()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
</div>

<script>
let currentView = 'home';

function startImgurUpload() {
    const file = document.getElementById('newimg').files[0];
    if (!file) return alert("Ø§Ø®ØªØ§Ø±ÙŠ ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹");

    const form = new FormData();
    form.append('image', file);
    form.append('title', 'Laser Dekor Image');

    const frame = document.getElementById('uploadFrame');
    frame.style.display = 'block';
    frame.onload = function() {
        document.getElementById('uploadStatus').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹ Ø¹Ù„Ù‰ Imgur... â³";
    };

    // Ø§Ø³ØªØ¹Ù…Ø§Ù„ iframe Ù„Ù„Ø±ÙØ¹ Ø¨Ø¯ÙˆÙ† CORS Ù…Ø´Ø§ÙƒÙ„
    const imgurUrl = 'https://api.imgur.com/3/image';
    frame.src = 'data:text/html,<form method="post" enctype="multipart/form-data" action="' + imgurUrl + '"><input type="file" name="image"><input type="hidden" name="title" value="Laser Dekor"></form><script>document.forms[0].submit();</script>';

    // Ø¨Ø¯ÙŠÙ„ Ø£ÙØ¶Ù„: Ø§Ø³ØªØ¹Ù…Ø§Ù„ fetch Ù…Ø¹ anonymous upload (Ø¨Ø¯ÙˆÙ† key)
    fetch('https://api.imgur.com/3/image', {
        method: 'POST',
        headers: {
            'Authorization': 'Client-ID 4e5b2a3d8f6e9c1', // Client ID Ø¹Ø§Ù… Ù„Ù„Ø±ÙØ¹ Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„
        },
        body: form
    }).then(res => res.json()).then(data => {
        if (data.success) {
            const url = 'https://i.imgur.com/' + data.data.id + '.jpg';
            addImageToStorage(url);
            document.getElementById('uploadStatus').innerText = "ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­! ğŸ’›";
            document.getElementById('newimg').value = '';
            document.getElementById('capimg').value = '';
            setTimeout(() => document.getElementById('uploadStatus').innerText = '', 4000);
        } else {
            alert("ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹ØŒ Ø¬Ø±Ø¨ÙŠ ØªØ§Ù†ÙŠ Ø£Ùˆ ØºÙŠØ±ÙŠ Ø§Ù„ÙˆØ§ÙŠ ÙØ§ÙŠ");
        }
    }).catch(e => {
        alert("Ù…Ø´ÙƒÙ„ ÙÙŠ Ø§Ù„Ù†ØªØŒ ØªØ£ÙƒØ¯ÙŠ ÙˆØ¬Ø±Ø¨ÙŠ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©");
    });
}

function addImageToStorage(url) {
    let d = JSON.parse(localStorage.getItem('laserData') || JSON.stringify(defaultData));
    d.img.push({url: url, cap: document.getElementById('capimg').value.trim()});
    localStorage.setItem('laserData', JSON.stringify(d));
    loadPhotos();
}

// Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù†ÙØ³Ù‡Ø§
const defaultData = {
    img: [
        {url:"https://i.imgur.com/9j2K8Yn.jpg", cap:"Ø¯ÙƒÙˆØ± Ù„ÙŠØ²Ø± Ø°Ù‡Ø¨ÙŠ"},
        {url:"https://i.imgur.com/4z8pL5m.jpg", cap:"Ø­Ù„ÙˆÙŠØ§Øª Ù…Ø¹ Ù„ÙŠØ²Ø±"},
        {url:"https://i.imgur.com/x7vR9pK.jpg", cap:"Ø£Ø³Ù…Ø§Ø¡ Ù…Ø¶ÙŠØ¦Ø©"},
        {url:"https://i.imgur.com/Mo3sL2D.jpg", cap:"Ø·Ø§ÙˆÙ„Ø© Ø­Ù„ÙˆÙŠØ§Øª"},
        {url:"https://i.imgur.com/f5nG7hJ.jpg", cap:"ÙƒÙˆØ´Ø© Ù„ÙŠØ²Ø±"},
        {url:"https://i.imgur.com/8vBx9sP.jpg", cap:"Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯"}
    ],
    vid: [
        {url:"https://www.youtube.com/watch?v=2o6s3zA04eM", cap:"Ø¹Ø±Ø¶ Ù„ÙŠØ²Ø±"},
        {url:"https://www.youtube.com/watch?v=JJ8n9z2c2kM", cap:"Ø¯ÙŠÙƒÙˆØ± Ù…Ø¹ Ø­Ù„ÙˆÙŠØ§Øª"},
        {url:"https://youtu.be/fG9zX7yK8mA", cap:"ÙƒÙˆØ´Ø© Ø°Ù‡Ø¨ÙŠØ©"},
        {url:"https://www.youtube.com/watch?v=Q8jY3pL5Rv0", cap:"Ø£Ø³Ù…Ø§Ø¡ Ù…Ø¶ÙŠØ¦Ø©"}
    ]
};

function showPage(page){
    document.getElementById('home').style.display = 'none';
    document.getElementById('photos').style.display = page==='photos'?'block':'none';
    document.getElementById('videos').style.display = page==='videos'?'block':'none';
    document.querySelector('.back-btn').style.display = 'block';
    currentView = page;
    if(page==='photos') loadPhotos();
    if(page==='videos') loadVideos();
    history.pushState({page: page}, '');
}

function goBack(){
    document.getElementById('home').style.display = 'block';
    document.getElementById('photos').style.display = 'none';
    document.getElementById('videos').style.display = 'none';
    document.querySelector('.back-btn').style.display = 'none';
    closeLightbox();
    currentView = 'home';
}

window.addEventListener('popstate', function(){
    if(currentView === 'lightbox'){ closeLightbox(); }
    else if(currentView === 'photos' || currentView === 'videos'){ goBack(); }
});

function openLightbox(src){
    document.getElementById('bigImg').src = src;
    document.getElementById('lightbox').classList.add('active');
    currentView = 'lightbox';
    history.pushState({page: 'lightbox'}, '');
}
function closeLightbox(){
    document.getElementById('lightbox').classList.remove('active');
    document.getElementById('bigImg').src = '';
    currentView = document.getElementById('photos').style.display==='block' ? 'photos' : 'videos';
}

let pressTimer;
document.getElementById('adminIcon').addEventListener('touchstart', e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('mousedown', e=>{e.preventDefault();pressTimer=setTimeout(openAdmin,1000);});
document.getElementById('adminIcon').addEventListener('touchend', ()=>clearTimeout(pressTimer));
document.getElementById('adminIcon').addEventListener('mouseup', ()=>clearTimeout(pressTimer));

function openAdmin(){
    if(prompt("Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠ:")==="1234"){
        document.getElementById('adminpanel').style.display="block";
        document.querySelectorAll('.del').forEach(d=>d.style.display="flex");
        alert("â™¥ ØªÙ… ÙŠØ§ Ù‚Ù…Ø± â™¥");
    }
}

function loadPhotos(){
    let data = JSON.parse(localStorage.getItem('laserData')||JSON.stringify(defaultData));
    let html = '';
    data.img.forEach((x,i)=>{
        html += `<div class="item">
                    <img src="${x.url}" onclick="openLightbox('${x.url}')">
                    <div class="cap">${x.cap||''}</div>
                    <div class="del" onclick="delImg(${i})">Ã—</div>
                 </div>`;
    });
    document.getElementById('photoContainer').innerHTML = html;
}
function loadVideos(){
    let data = JSON.parse(localStorage.getItem('laserData')||JSON.stringify(defaultData));
    let html = '';
    data.vid.forEach((x,i)=>{
        const embed = x.url.includes('youtu.be') ? 'https://www.youtube.com/embed/'+x.url.split('/').pop() : x.url.replace('watch?v=','embed/');
        html += `<div class="item">
                    <iframe src="${embed}" allowfullscreen></iframe>
                    <div class="cap">${x.cap||''}</div>
                    <div class="del" onclick="delVid(${i})">Ã—</div>
                 </div>`;
    });
    document.getElementById('videoContainer').innerHTML = html;
}

function addVid(){
    const l = document.getElementById('newvid').value.trim();
    if(!l.includes('yout')) return alert("Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ ÙÙ‚Ø·");
    let d = JSON.parse(localStorage.getItem('laserData')||JSON.stringify(defaultData));
    d.vid.push({url:l, cap:document.getElementById('capvid').value});
    localStorage.setItem('laserData',JSON.stringify(d));
    loadVideos();
    document.getElementById('newvid').value = '';
    document.getElementById('capvid').value = '';
}
function delImg(i){if(confirm("ØªÙ…Ø³Ø­ÙŠÙ‡Ø§ØŸ")){let d=JSON.parse(localStorage.getItem('laserData')||JSON.stringify(defaultData));d.img.splice(i,1);localStorage.setItem('laserData',JSON.stringify(d));loadPhotos();}}
function delVid(i){if(confirm("ØªÙ…Ø³Ø­ÙŠÙ‡Ø§ØŸ")){let d=JSON.parse(localStorage.getItem('laserData')||JSON.stringify(defaultData));d.vid.splice(i,1);localStorage.setItem('laserData',JSON.stringify(d));loadVideos();}}

function toggleLang(){alert("Ù‚Ø±ÙŠØ¨Ù‹Ø§! â™¥");}

loadPhotos(); loadVideos();
</script>
</body>
</html>
